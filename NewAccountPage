package application;

import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.control.Alert.AlertType;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;
import javafx.geometry.Insets;
import java.time.LocalDate;

public class NewAccountPage {
	 private Scene newAccountScene;

	    public NewAccountPage(Stage primaryStage) {
	        Label accountNameLabel = new Label("Account Name:");
	        TextField accountNameField = new TextField();

	        Label openingDateLabel = new Label("Opening Date:");
	        DatePicker openingDatePicker = new DatePicker(LocalDate.now());

	        Label openingBalanceLabel = new Label("Opening Balance:");
	        TextField openingBalanceField = new TextField();

	        Button submitButton = new Button("Submit");

	        VBox newAccountLayout = new VBox(10);
	        newAccountLayout.setPadding(new Insets(20));
	        newAccountLayout.getChildren().addAll(
	                accountNameLabel, accountNameField,
	                openingDateLabel, openingDatePicker,
	                openingBalanceLabel, openingBalanceField,
	                submitButton
	        );

	        newAccountScene = new Scene(newAccountLayout, 400, 300);

	        submitButton.setOnAction(e -> {
	            String accountName = accountNameField.getText();
	            LocalDate openingDate = openingDatePicker.getValue();
	            String openingBalance = openingBalanceField.getText();

	            if (accountName.isEmpty() || openingBalance.isEmpty()) {
	                showAlert(Alert.AlertType.ERROR, "Error", "Please fill in all fields.");
	            } else {
	                showAlert(Alert.AlertType.INFORMATION, "Success", "Account created successfully!");
	                accountNameField.clear();
	                openingDatePicker.setValue(LocalDate.now());
	                openingBalanceField.clear();
	                primaryStage.setScene(new HomePage(primaryStage).getHomeScene()); // Return to homepage
	            }
	        });
	    }

	    public Scene getNewAccountScene() {
	        return newAccountScene;
	    }
	    
	    public static void showAlert(AlertType alertType, String title, String message) {
	        Alert alert = new Alert(alertType);
	        alert.setTitle(title);
	        alert.setHeaderText(null);
	        alert.setContentText(message);
	        alert.showAndWait();
	    }
}
